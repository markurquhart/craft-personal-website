#!/bin/sh
#
# Git hook to prevent Claude Code mentions in commit messages
#
# To install: cp git-hooks/commit-msg .git/hooks/commit-msg && chmod +x .git/hooks/commit-msg
#

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Check for Claude Code mentions
if echo "$commit_msg" | grep -qi "claude code\|claude.com/claude-code\|Co-Authored-By: Claude\|ðŸ¤– Generated with"; then
    echo "ERROR: Commit message contains Claude Code mentions."
    echo "Please remove any references to Claude Code, co-authorship, or generated-with messages."
    echo ""
    echo "Rejected commit message:"
    echo "---"
    cat "$commit_msg_file"
    echo "---"
    exit 1
fi

exit 0
