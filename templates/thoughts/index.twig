{% extends "_layout.twig" %}

{% block content %}
    <h1>Thoughts</h1>

    <p style="margin-bottom: 2rem;">My blog posts, ideas, and reflections.</p>

    {% set blogEntries = craft.entries()
        .section('thoughts')
        .orderBy('postDate DESC')
        .all() %}

    {% if blogEntries|length %}
        <ul class="entry-list">
            {% for entry in blogEntries %}
                <li>
                    {% if entry.featuredImage|length %}
                        {% set image = entry.featuredImage.one() %}
                        <img src="{{ image.url }}" alt="{{ image.title }}" style="width: 100%; height: 250px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem;">
                    {% endif %}

                    <h3><a href="{{ entry.url }}">{{ entry.title }}</a></h3>

                    <div class="meta">
                        Published: {{ entry.postDate|date('F j, Y') }}
                    </div>

                    {% if entry.summary %}
                        <p>{{ entry.summary }}</p>
                    {% elseif entry.postBody %}
                        <p>{{ entry.postBody|length > 250 ? entry.postBody|slice(0, 250) ~ '...' : entry.postBody }}</p>
                    {% endif %}

                    {% if entry.blogCategories|length %}
                        <div>
                            {% for category in entry.blogCategories.all() %}
                                <a href="/thoughts/category/{{ category.slug }}" class="tag">{{ category.title }}</a>
                            {% endfor %}
                        </div>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p style="padding: 2rem; background: #f8f9fa; border-radius: 8px; text-align: center;">
            No blog posts yet. Create some in the Craft control panel!
        </p>
    {% endif %}
{% endblock %}
